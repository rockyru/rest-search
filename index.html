<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<title> RESTful Search Plugin</title>
		<link rel="stylesheet" href="./css/main.css">
	</head>
	
	<body>
		
		<div class="wrapper">
			<div class="search-wrapper">
				<input type="text" id="q_box" class="q_box" placeholder="Search prodcuts">
			</div>
			<div class="data-wrapper">
				<table id="tablet" cellpadding="5">
					<thead></thead>
					<tbody></tbody>
				</table>
			</div>
		</div>
		
			
	<script src="./js/jquery.js"></script>
	<script src="./js/restSearch.js"></script>
	<script>
		$(document).ready(function(){
			
			var url = "./items.json";
			function addAllColumnHeaders(myList) {
			    var columnSet = [];
			    var headerTr$ = $('<tr/>');
			
			    for (var i = 0; i < myList.length; i++) {
			        var rowHash = myList[i];
			        for (var key in rowHash) {
			            if ($.inArray(key, columnSet) == -1) {
			                columnSet.push(key);
			                headerTr$.append($('<th/>').html(key));
			            }
			        }
			    }
			    $("#tablet thead").append(headerTr$);
			
			    return columnSet;
			}

			$.getJSON(url, function (data) {
			    var columns = addAllColumnHeaders(data);
			
			    for (var i = 0; i < data.length; i++) {
			        var row$ = $('<tr/>');
			        for (var colIndex = 0; colIndex < columns.length; colIndex++) {
			            var cellValue = data[i][columns[colIndex]];
			
			            if (cellValue == null) { cellValue = ""; }
			
			            row$.append($('<td/>').html(cellValue));
			        }
			        $("#tablet tbody").append(row$);
			    }
			});

			$("#q_box").keyup(function(){
			        _this = this;
			        // Show only matching TR, hide rest of them
			        $.each($("#tablet tbody").find("tr"), function() {
			  
			            if($(this).text().toLowerCase().indexOf($(_this).val().toLowerCase()) == -1){
			               $(this).hide();
						   
						}
			            else {
					
			                 $(this).show();           
						}     
			        });
		    }); 
		});
		
	</script>
	</body>

</html>