<!DOCTYPE html>
<html lang="en">
<head>
	 <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
  	<!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
	<title>Weather App</title>
	<link rel="stylesheet" type="text/css" href="./bootstrap/dist/css/bootstrap.min.css">
	<!-- Ionicons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ionicons/2.0.1/css/ionicons.min.css">
    <!--Import Google Icon Font-->
    <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/icon?family=Material+Icons" >
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>
<body>

	<div class="container">
		<div class="row">
			<div class="col-md-12">
				<h1 class="location"></h1>
				<p class="date"></p>
				<i class="icon"></i>
				<table class="table">
					<tbody>
						
					</tbody>
				</table>

			</div>
		</div>

		
	</div>

	<div class="container app"></div>

<script type="text/javascript" src="./js/jquery.min.js"></script>
<script type="text/javascript" src="./bootstrap/dist/js/bootstrap.min.js"></script>
<script type="text/javascript">
	$(document).ready(function() {

		var lat,lang, api_url,api_key="5b57b0cdbbf3ea7c";
	

		if(navigator.geolocation) {

			navigator.geolocation.getCurrentPosition(function(position) {

				lat = position.coords.latitude;
				lang = position.coords.longitude;
				console.log(lat);
				console.log(lang);
				api_url = "http://api.wunderground.com/api/"+ api_key +"/forecast/geolookup/conditions/q/" + lat + "," + lang + ".json";

				$.ajax({
					url : api_url,
					type:'get',
					datatype:'jsonp',
					success: function(data) {
						var location =data['current_observation']['observation_location']['city'];
						var temp = data['current_observation']['temp_c']
						var forecast = data['forecast']['txt_forecast']['forecastday'];
						var date = data['forecast']['txt_forecast']['date'];
						$(".date").text("As of " + date);
						var g=0;
						$(".location").text(location);
						for(i in forecast) {
							console.log(forecast.length);
							var count = forecast.length;
							$(".icon").css('background-image',"url("+forecast[i]['icon']+")");
							$(".icon").css('bacground','url('+ forecast[i]['icon_url'] +')');
							$("table tbody").append(
									"<tr>"
										+"<td>"+ forecast[i]['title'] +"</td>"
										+"<td>"+ forecast[i]['fcttext'] +"</td>"
										+"<td>"+ forecast[i]['fcttext_metric'] +"</td>"
									+"</tr>"
								);
							
							
						}

						console.log(location);
					}
				});
			});
			
			
		} else {
			console.log("Oops");
		}
		
		
		
		

	});
</script>
</body>
</html>